(function(){ try {var elementStyle = document.createElement('style'); elementStyle.appendChild(document.createTextNode("")); document.head.appendChild(elementStyle);} catch(e) {console.error('vite-plugin-css-injected-by-js', e);} })();(function(){"use strict";const q=async(n,e,i)=>await new Promise(h=>{setTimeout(()=>{h({text:"TEXTO",timestamp:"",ctas:[{type:"phone",url:"to",title:"BTON"}]})},1e4)}),B=async n=>{try{return(await(await fetch(`https://cichautomation.duckdns.org/webhook/6084f3e8-1325-4f15-8649-969cb17891af?id=${n}`)).json()).content}catch(e){return console.error(e),{code:1}}},y=(n,e,i)=>`<div class="">
					<div class="system-messages w-full mb-4 text-white px-5">
					${n}		
					</div>
					${i?z(i):""}
				</div>`,H=()=>`<div id="skeleton-message" class="w-4/5 max-w-sm p-2 mb-4 flex flex-col gap-2">	
				<div class="animate-pulse h-3 bg-gray-500/60 rounded w-1/3"></div>
				<div class="animate-pulse h-3 bg-gray-500/60 rounded w-full"></div>
				<div class="animate-pulse h-3 bg-gray-500/60 rounded w-3/4"></div>	
				<p id="skltn-text" class="text-sm italic text-white"></p>
  			</div>`,b=(n,e)=>`<div class="flex mt-2 mb-2 w-full text-white justify-center text-center">
				<p class="text-2xl">${n}</p>		
			</div>`,z=n=>`<div class="flex flex-col align-middle gap-3 mt-3 justify-center mb-4">
				${n.map(e=>{switch(e.type){case"link":return`<a target="_blank"
					class="${F}" 
					href="${e.url}"
					>
					${e.title}
					</a>`;case"whatsapp":return`<a target="_blank" 
					href="${e.url}"
					class="${P}">
					${O}
					<p>${e.title}</p>
					</button></a>`;case"phone":return`<a target="_blank" 
					href="${e.url}"
					class="${U}">
					${_}
					<p>${e.title}</p>
					</button></a>`}}).join("")}
	</div>`,D=n=>`<div id="widget-container" class="roboto-400 z-main bg-transparent relative rounded-3xl flex flex-col justify-center align-middle w-full max-w-screen-md transition-all duration-200 ms-5">
			<button id="minimize-button" class="absolute z-50 right-5 top-2 ml-auto text-white">
				<svg xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-minus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12l14 0" /></svg>
			</button>
		 <div id="chat-container" class="flex flex-col flex-grow overflow-auto max-h-0 z-0 transition-all duration-200 opacity-0">
           ${n.map(e=>e.sender==="user"?b(e.text,e.timestamp):y(e.text,e.timestamp,e.ctas)).join("")}
		   </div>
		<div id="input-container" class="bg-zinc-800/90 p-4 rounded-3xl text-white flex justify-between align-middle mx-auto w-full transition-all duration-200">
			<input id="chat-input" class="w-full placeholder:text-gray-400 bg-transparent ${N.join(" ")} focus-visible:outline-none max-w-screen-sm" placeholder="Preguntame lo que quieras"></input>
			<button id="send-button" class="my-auto invisible hover:text-slate-300">
				<svg xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-send-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4.698 4.034l16.302 7.966l-16.302 7.966a.503 .503 0 0 1 -.546 -.124a.555 .555 0 0 1 -.12 -.568l2.468 -7.274l-2.468 -7.274a.555 .555 0 0 1 .12 -.568a.503 .503 0 0 1 .546 -.124z" /><path d="M6.5 12h14.5" /></svg>
			</button>
		</div>
		<a id="alchimiaLabs" href="https://localhost" target="_blank" class="ms-auto hidden pt-2"><p class="chrome hover:text-white italic text-xs cursor-pointer">powered by <span class="not-italic">AlchimiaLabs</span></p></a>
	  </div>`,N=["text-lg","md:text-2xl"],A=`fixed ${["top-1/2","sm-top-1/5","-translate-y-1/2","xs-translate-y-0"].join(" ")} flex justify-center w-screen z-50 transition-all duration-300 px-5`,F="inline mx-auto w-full md:min-w-40 sm:max-w-80 bg-purple-500/60 hover:bg-purple-600 rounded-full hover:shadow-none text-white text-xl font-semibold px-3 py-1 text-center custom-link",P="inline mx-auto w-full md:min-w-40 sm:max-w-80 whatsapp custom-whatsapp  hover:bg-green-600 rounded-full hover:shadow-none text-white text-xl font-semibold px-3 py-1 flex flex-row gap-2 align-middle justify-center text-center",O='<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="my-auto icon icon-tabler icons-tabler-outline icon-tabler-brand-whatsapp"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21l1.65 -3.8a9 9 0 1 1 3.4 2.9l-5.05 .9" /><path d="M9 10a.5 .5 0 0 0 1 0v-1a.5 .5 0 0 0 -1 0v1a5 5 0 0 0 5 5h1a.5 .5 0 0 0 0 -1h-1a.5 .5 0 0 0 0 1" /></svg>',U="inline mx-auto w-full md:min-w-40 sm:max-w-80 bg-purple-500/60 hover:bg-purple-600 rounded-full hover:shadow-none text-white text-xl font-semibold px-3 py-1 flex flex-row gap-2 align-middle justify-center text-center custom-link",_='<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-phone"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2" /></svg>';function J(n,e,i){const r={value:e,expiry:new Date().getTime()+i};sessionStorage.setItem(n,JSON.stringify(r))}function R(n){const e=sessionStorage.getItem(n);if(!e)return null;const i=JSON.parse(e);return new Date().getTime()>i.expiry?(sessionStorage.removeItem(n),null):i.value}function k(n,e,i={}){const r={...{typingSpeed:30,deletingSpeed:15,pauseTime:2e3,loop:!0},...i};let c=!1,s=0,o,d=0;function u(){const f=e[d];let w=n.nodeName=="INPUT"?"value":"innerText";if(c){if(n[w]=f.slice(0,s-1),s--,s===0){if(c=!1,d++,d>=e.length)if(r.loop)d=0;else return;o=setTimeout(u,r.pauseTime);return}}else if(n[w]=f.slice(0,s+1),s++,s===f.length){c=!0,o=setTimeout(u,r.pauseTime);return}o=setTimeout(u,c?r.deletingSpeed:r.typingSpeed)}return u(),{stop:()=>clearTimeout(o)}}function W(n,e){let i=n.nodeName=="INPUT"?"value":"innerText";e&&(e.stop(),e=void 0,n[i]="")}(async()=>{const n=[{text:"Hola. ¿Cómo podemos ayudarte?",sender:"system",timestamp:new Date}],e=document.getElementById("AlcLabsScript").getAttribute("data-apikey");let i={};const h=await B(e);h.code?i.recipeTexts=[""]:i=h;const r=document.createElement("div");document.body.appendChild(r);const c=r.attachShadow({mode:"open"});let s=c;{const t=document.createElement("style"),a="https://cdn.jsdelivr.net/gh/ahroncich7/augmentumResources@v0.0.7/styles.css";t.textContent=await fetch(a).then(l=>l.text()),c.appendChild(t)}const o=document.createElement("div");let d=!1,u=!1,f,w,T,S,C,g,p,M;const Y=()=>{o.className=A,o.style=i.customWidgetMainStyle,o.innerHTML=D(x),w=s.querySelector("#chat-container"),s.querySelector("#widget-container"),C=s.querySelector("#input-container"),g=s.querySelector("#chat-input"),T=s.querySelector("#send-button"),S=s.querySelector("#minimize-button"),s.querySelector("#alchimiaLabs"),K(),p=1,M=k(g,i.recipeTexts,{loop:!0})},K=()=>{T.addEventListener("click",E),S.addEventListener("click",Q),document.addEventListener("scroll",X),C.addEventListener("click",G)},E=async()=>{if(d)return;const t=g.value;if(d=!0,m(2),!t)return;[...x];const a={text:t,sender:"user",timestamp:new Date().toString()};$(a),j(!0),g.value="";const l=await q();if(j(!1),l.code){let v;l.code==3&&(v="La respuesta demoró demasiado. Intenta nuevamente"),alert(v)}else x.push(a),x.push(l),$(l);d=!1},$=t=>{s.getElementById("chat-container");const a=t.sender=="user"?b(t.text,t.timestamp):y(t.text,t.timestamp,t.ctas?t.ctas:"");I(a),J("messages",x,36e5),requestAnimationFrame(()=>{L(),V()})},V=()=>{const t=new Date;s.querySelectorAll(".messageTimeStamp").forEach(l=>{const v=new Date(l.dataset.timestamp);if(!v)return;const Z=Math.ceil((t-v)/(1e3*60));l.innerHTML=`Hace ${Z} min.`})},x=R("messages")||n;c.appendChild(o),Y(),s.addEventListener("keydown",t=>{s.activeElement==g&&(p!=2&&m(2),t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),E()))});const I=t=>{const a=document.createElement("div");a.innerHTML=t;const l=a.firstElementChild;w.appendChild(l)},L=()=>{const t=s.getElementById("chat-container");t.scrollTo({top:t.scrollHeight,behavior:"smooth"})};function X(){window.scrollY>window.visualViewport.height*.2&&m(3),window.scrollY==0&&m(u?2:1)}const j=t=>{if(t)I(H()),requestAnimationFrame(()=>{f=setTimeout(()=>{const a=s.querySelector("#skltn-text");k(a,i.skeletonTexts,{typingSpeed:10,deletingSpeed:10,pauseTime:1e3,loop:!0})},3500)});else{const a=s.querySelector("#skeleton-message");clearTimeout(f),a.remove()}};function G(t){u=!0,t.preventDefault(),p!=2&&m(2)}function Q(t){u=!1,t.preventDefault(),p==2?m(1):p==1&&m(3)}function m(t){W(g,M),t==1?(o.classList.remove("expanded"),o.classList.remove("minified"),p=1):t==2?(o.classList.remove("minified"),o.classList.add("expanded"),L(),p=2):t==3&&(o.classList.remove("expanded"),o.classList.add("minified"),p=3)}})()})();
