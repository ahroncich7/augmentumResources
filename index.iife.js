(function(){ try {var elementStyle = document.createElement('style'); elementStyle.appendChild(document.createTextNode("")); document.head.appendChild(elementStyle);} catch(e) {console.error('vite-plugin-css-injected-by-js', e);} })();(function(){"use strict";const M=async(n,t,i,c)=>(await(await fetch("https://cichautomation.duckdns.org/webhook/9a97cd47-cd26-47ae-91f8-b92d0a62ee5a",{method:"POST",body:JSON.stringify({id:c,newMessage:{text:n,sender:t,timestamp:new Date},history:i})})).json()).content,p=(n,t,i)=>`<div class="system-messages flex w-full mb-4 text-white px-5">
				<p class="text-sm">${n}</p>		
				</div>
				${i?L(i):""}`,E=()=>`<div id="skeleton-message" class="w-4/5 max-w-sm p-2 flex flex-col gap-2">	
				<div class="animate-pulse h-3 bg-gray-300/50 rounded w-1/3"></div>
				<div class="animate-pulse h-3 bg-gray-300/50 rounded w-full"></div>
				<div class="animate-pulse h-3 bg-gray-300/50 rounded w-3/4"></div>	
  			</div>`,h=(n,t)=>`<div class="flex mt-2 mb-2 w-full text-white justify-center">
				<p class="text-2xl">${n}</p>		
			</div>`,L=n=>`<div class="flex flex-col align-middle gap-3 mt-3 justify-center mb-4">
				${n.map(t=>{switch(t.type){case"link":return`<a target="_blank"
					class="${H}" 
					href="${t.url}"
					>
					${t.title}
					</a>`;case"whatsapp":return`<a target="_blank" 
					href="${t.url}"
					class="${I}">
					${q}
					<p>${t.title}</p>
					</button></a>`}}).join("")}
	</div>`,j=n=>`<div id="widget-container" class="roboto-400 bg-transparent relative rounded-3xl flex flex-col justify-center align-middle w-full max-w-screen-md transition-all duration-200 ms-5">
			<button id="minimize-button" class="absolute z-50 right-5 top-2 ml-auto text-white">
				<svg xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-minus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12l14 0" /></svg>
			</button>
		 <div id="chat-container" class="flex flex-col flex-grow overflow-auto max-h-0 z-0 transition-all duration-200 opacity-0">
           ${n.map(t=>t.sender==="user"?h(t.text,t.timestamp):p(t.text,t.timestamp,t.ctas)).join("")}  
		   </div>
		<div id="input-container" class="bg-zinc-800/90 p-4 rounded-3xl text-white flex justify-between align-middle mx-auto w-full transition-all duration-200">
			<input id="chat-input" class="w-full placeholder:text-gray-400 bg-transparent ${$.join(" ")} focus-visible:outline-none max-w-screen-sm" placeholder="Preguntame lo que quieras"></input>
			<button id="send-button" class="my-auto invisible hover:text-slate-300">
				<svg xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-send-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4.698 4.034l16.302 7.966l-16.302 7.966a.503 .503 0 0 1 -.546 -.124a.555 .555 0 0 1 -.12 -.568l2.468 -7.274l-2.468 -7.274a.555 .555 0 0 1 .12 -.568a.503 .503 0 0 1 .546 -.124z" /><path d="M6.5 12h14.5" /></svg>
			</button>
		</div>
		<a id="alchimiaLabs" href="https://localhost" target="_blank" class="ms-auto hidden pt-2"><p class="chrome hover:text-white italic text-xs cursor-pointer">powered by <span class="not-italic">AlchimiaLabs</span></p></a>
	  </div>`,$=["text-lg","md:text-2xl"],T=`fixed ${["top-1/2","sm-top-1/5","-translate-y-1/2","xs-translate-y-0"].join(" ")} flex justify-center w-screen z-50 transition-all duration-300 px-5`,H="inline mx-auto w-full md:min-w-40 sm:max-w-80 bg-purple-500/60 hover:bg-purple-600 rounded-full hover:shadow-none text-white text-xl font-semibold px-3 py-1 text-center custom-link",I="inline mx-auto w-full md:min-w-40 sm:max-w-80 whatsapp custom-whatsapp  hover:bg-green-600 rounded-full hover:shadow-none text-white text-xl font-semibold px-3 py-1 flex flex-row gap-2 align-middle justify-center text-center",q='<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="my-auto icon icon-tabler icons-tabler-outline icon-tabler-brand-whatsapp"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21l1.65 -3.8a9 9 0 1 1 3.4 2.9l-5.05 .9" /><path d="M9 10a.5 .5 0 0 0 1 0v-1a.5 .5 0 0 0 -1 0v1a5 5 0 0 0 5 5h1a.5 .5 0 0 0 0 -1h-1a.5 .5 0 0 0 0 1" /></svg>';function B(n,t,i){const s={value:t,expiry:new Date().getTime()+i};sessionStorage.setItem(n,JSON.stringify(s))}function z(n){const t=sessionStorage.getItem(n);if(!t)return null;const i=JSON.parse(t);return new Date().getTime()>i.expiry?(sessionStorage.removeItem(n),null):i.value}(async()=>{const n=[{text:"Hola. ¿Cómo podemos ayudarte?",sender:"system",timestamp:new Date}];document.getElementById("AlcLabsScript").getAttribute("data-theme");const t=document.getElementById("AlcLabsScript").getAttribute("data-apikey"),i=document.createElement("div");document.body.appendChild(i);const c=i.attachShadow({mode:"open"});let s=c;{const e=document.createElement("style"),o="https://cdn.jsdelivr.net/gh/ahroncich7/augmentumResources@v0.0.6/styles.css";e.textContent=await fetch(o).then(r=>r.text()),c.appendChild(e)}const a=document.createElement("div");let w,g,f,x,u,l;const D=()=>{a.className=T,a.innerHTML=j(m),w=s.querySelector("#chat-container"),s.querySelector("#widget-container"),x=s.querySelector("#input-container"),u=s.querySelector("#chat-input"),g=s.querySelector("#send-button"),f=s.querySelector("#minimize-button"),s.querySelector("#alchimiaLabs"),A(),l=1},A=()=>{g.addEventListener("click",v),f.addEventListener("click",_),document.addEventListener("scroll",O),x.addEventListener("click",J)},v=async()=>{const e=u.value;if(d(2),!e)return;const o=[...m];y({text:e,sender:"user",timestamp:new Date().toString()}),S(!0),u.value="";const r=await M(e,"user",o,t);S(!1),y(r)},y=e=>{s.getElementById("chat-container");const o=e.sender=="user"?h(e.text,e.timestamp):p(e.text,e.timestamp,e.ctas|"");b(o),m.push(e),B("messages",m,36e5),requestAnimationFrame(()=>{k(),N()})},N=()=>{const e=new Date;s.querySelectorAll(".messageTimeStamp").forEach(r=>{const C=new Date(r.dataset.timestamp);if(!C)return;const P=Math.ceil((e-C)/(1e3*60));r.innerHTML=`Hace ${P} min.`})},m=z("messages")||n;c.appendChild(a),D(),s.addEventListener("keydown",e=>{s.activeElement==u&&(l!=2&&d(2),e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),v()))});const b=e=>{const o=document.createElement("div");o.innerHTML=e;const r=o.firstElementChild;w.appendChild(r)},k=()=>{const e=s.getElementById("chat-container");e.scrollTo({top:e.scrollHeight,behavior:"smooth"})};function O(){window.scrollY>window.visualViewport.height*.2&&d(3),window.scrollY==0&&d(1)}const S=e=>{e?b(E()):s.querySelector("#skeleton-message").remove()};function J(e){e.preventDefault(),l!=2&&d(2)}function _(e){e.preventDefault(),l==2?d(1):l==1&&d(3)}function d(e){e==1?(a.classList.remove("expanded"),a.classList.remove("minified"),l=1):e==2?(a.classList.remove("minified"),a.classList.add("expanded"),k(),l=2):e==3&&(a.classList.remove("expanded"),a.classList.add("minified"),l=3)}})()})();
