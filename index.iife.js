(function(){ try {var elementStyle = document.createElement('style'); elementStyle.appendChild(document.createTextNode("")); document.head.appendChild(elementStyle);} catch(e) {console.error('vite-plugin-css-injected-by-js', e);} })();(function(){"use strict";const H=async(n,e,o)=>{try{const r=new AbortController,{signal:l}=r,c=setTimeout(()=>{r.abort()},1e4),i=await(await fetch("https://cichautomation.duckdns.org/webhook/9a97cd47-cd26-47ae-91f8-b92d0a62ee5a",{method:"POST",body:JSON.stringify({id:o,newMessage:{text:n,sender:"user",timestamp:new Date},history:e}),signal:l})).json();return clearTimeout(c),i.content}catch(r){return console.error(r),r.name=="AbortError"?{code:3}:{code:1}}},z=async n=>{try{return(await(await fetch(`https://cichautomation.duckdns.org/webhook/6084f3e8-1325-4f15-8649-969cb17891af?id=${n}`)).json()).content}catch(e){return console.error(e),{code:1}}},y=(n,e,o)=>`<div class="">
					<div class="system-messages w-full mb-4 text-white px-5">
					${n}		
					</div>
					${o?D(o):""}
				</div>`,B=()=>`<div id="skeleton-message" class="w-4/5 max-w-sm p-2 mb-4 flex flex-col gap-2">	
				<div class="animate-pulse h-3 bg-gray-500/60 rounded w-1/3"></div>
				<div class="animate-pulse h-3 bg-gray-500/60 rounded w-full"></div>
				<div class="animate-pulse h-3 bg-gray-500/60 rounded w-3/4"></div>	
				<p id="skltn-text" class="text-sm italic text-white"></p>
  			</div>`,k=(n,e)=>`<div class="flex mt-2 mb-2 w-full text-white justify-center text-center">
				<p class="text-2xl">${n}</p>		
			</div>`,D=n=>`<div class="flex flex-col align-middle gap-3 mt-3 justify-center mb-4">
				${n.map(e=>{switch(e.type){case"link":return`<a target="_blank"
					class="${P}" 
					href="${e.url}"
					>
					${e.title}
					</a>`;case"whatsapp":return`<a target="_blank" 
					href="${e.url}"
					class="${O}">
					${U}
					<p>${e.title}</p>
					</button></a>`;case"phone":return`<a target="_blank" 
					href="${e.url}"
					class="${_}">
					${J}
					<p>${e.title}</p>
					</button></a>`}}).join("")}
	</div>`,A=n=>`<div id="widget-container" class="roboto-400 z-main bg-transparent relative rounded-3xl flex flex-col justify-center align-middle w-full max-w-screen-md transition-all duration-200 ms-5">
			<button id="minimize-button" class="absolute z-50 right-5 top-2 ml-auto text-white">
				<svg xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-minus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12l14 0" /></svg>
			</button>
		 <div id="chat-container" class="flex flex-col flex-grow overflow-auto max-h-0 z-0 transition-all duration-200 opacity-0">
           ${n.map(e=>e.sender==="user"?k(e.text,e.timestamp):y(e.text,e.timestamp,e.ctas)).join("")}
		   </div>
		<div id="input-container" class="bg-zinc-800/90 p-4 rounded-3xl text-white flex justify-between align-middle mx-auto w-full transition-all duration-200">
			<input id="chat-input" class="w-full placeholder:text-gray-400 bg-transparent ${N.join(" ")} focus-visible:outline-none max-w-screen-sm" placeholder="Preguntame lo que quieras"></input>
			<button id="send-button" class="my-auto invisible hover:text-slate-300">
				<svg xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-send-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4.698 4.034l16.302 7.966l-16.302 7.966a.503 .503 0 0 1 -.546 -.124a.555 .555 0 0 1 -.12 -.568l2.468 -7.274l-2.468 -7.274a.555 .555 0 0 1 .12 -.568a.503 .503 0 0 1 .546 -.124z" /><path d="M6.5 12h14.5" /></svg>
			</button>
		</div>
		<a id="alchimiaLabs" href="https://localhost" target="_blank" class="ms-auto hidden pt-2"><p class="chrome hover:text-white italic text-xs cursor-pointer">powered by <span class="not-italic">AlchimiaLabs</span></p></a>
	  </div>`,N=["text-lg","md:text-2xl"],F=`fixed ${["top-1/2","sm-top-1/5","-translate-y-1/2","xs-translate-y-0"].join(" ")} flex justify-center w-screen z-50 transition-all duration-300 px-5`,P="inline mx-auto w-full md:min-w-40 sm:max-w-80 bg-purple-500/60 hover:bg-purple-600 rounded-full hover:shadow-none text-white text-xl font-semibold px-3 py-1 text-center custom-link",O="inline mx-auto w-full md:min-w-40 sm:max-w-80 whatsapp custom-whatsapp  hover:bg-green-600 rounded-full hover:shadow-none text-white text-xl font-semibold px-3 py-1 flex flex-row gap-2 align-middle justify-center text-center",U='<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="my-auto icon icon-tabler icons-tabler-outline icon-tabler-brand-whatsapp"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21l1.65 -3.8a9 9 0 1 1 3.4 2.9l-5.05 .9" /><path d="M9 10a.5 .5 0 0 0 1 0v-1a.5 .5 0 0 0 -1 0v1a5 5 0 0 0 5 5h1a.5 .5 0 0 0 0 -1h-1a.5 .5 0 0 0 0 1" /></svg>',_="inline mx-auto w-full md:min-w-40 sm:max-w-80 bg-purple-500/60 hover:bg-purple-600 rounded-full hover:shadow-none text-white text-xl font-semibold px-3 py-1 flex flex-row gap-2 align-middle justify-center text-center custom-link",J='<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-phone"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2" /></svg>';function R(n,e,o){const l={value:e,expiry:new Date().getTime()+o};sessionStorage.setItem(n,JSON.stringify(l))}function W(n){const e=sessionStorage.getItem(n);if(!e)return null;const o=JSON.parse(e);return new Date().getTime()>o.expiry?(sessionStorage.removeItem(n),null):o.value}function T(n,e,o={}){const l={...{typingSpeed:30,deletingSpeed:15,pauseTime:2e3,loop:!0},...o};let c=!1,s=0,i,u=0;function m(){const g=e[u];let x=n.nodeName=="INPUT"?"value":"innerText";if(c){if(n[x]=g.slice(0,s-1),s--,s===0){if(c=!1,u++,u>=e.length)if(l.loop)u=0;else return;i=setTimeout(m,l.pauseTime);return}}else if(n[x]=g.slice(0,s+1),s++,s===g.length){c=!0,i=setTimeout(m,l.pauseTime);return}i=setTimeout(m,c?l.deletingSpeed:l.typingSpeed)}return m(),{stop:()=>clearTimeout(i)}}function Y(n,e){let o=n.nodeName=="INPUT"?"value":"innerText";e&&(e.stop(),e=void 0,n[o]="")}const K="0.0.8";(async()=>{const n=[{text:"Hola. ¿Cómo podemos ayudarte?",sender:"system",timestamp:new Date}],e=document.getElementById("AlcLabsScript").getAttribute("data-apikey");let o={};const r=await z(e);r.code?o.recipeTexts=[""]:o=r;const l=document.createElement("div");document.body.appendChild(l);const c=l.attachShadow({mode:"open"});let s=c;{const t=document.createElement("style"),a=`https://cdn.jsdelivr.net/gh/ahroncich7/augmentumResources@v${K}/styles.css`;t.textContent=await fetch(a).then(d=>d.text()),c.appendChild(t)}const i=document.createElement("div");let u=!1,m=!1,g,x,S,C,M,w,p,E;const V=()=>{i.className=F,i.style=o.customWidgetMainStyle,i.innerHTML=A(v),x=s.querySelector("#chat-container"),s.querySelector("#widget-container"),M=s.querySelector("#input-container"),w=s.querySelector("#chat-input"),S=s.querySelector("#send-button"),C=s.querySelector("#minimize-button"),s.querySelector("#alchimiaLabs"),G(),p=1,E=T(w,o.recipeTexts,{loop:!0})},G=()=>{S.addEventListener("click",$),C.addEventListener("click",ee),document.addEventListener("scroll",X),M.addEventListener("click",Z)},$=async()=>{if(u)return;const t=w.value;if(u=!0,h(2),!t)return;const a=[...v],d={text:t,sender:"user",timestamp:new Date().toString()};I(d),q(!0),w.value="";const f=await H(t,a,e);if(q(!1),f.code){let b;f.code==3&&(b="La respuesta demoró demasiado. Intenta nuevamente"),alert(b)}else v.push(d),v.push(f),I(f);u=!1},I=t=>{s.getElementById("chat-container");const a=t.sender=="user"?k(t.text,t.timestamp):y(t.text,t.timestamp,t.ctas?t.ctas:"");L(a),R("messages",v,36e5),requestAnimationFrame(()=>{j(),Q()})},Q=()=>{const t=new Date;s.querySelectorAll(".messageTimeStamp").forEach(d=>{const f=new Date(d.dataset.timestamp);if(!f)return;const b=Math.ceil((t-f)/(1e3*60));d.innerHTML=`Hace ${b} min.`})},v=W("messages")||n;c.appendChild(i),V(),s.addEventListener("keydown",t=>{s.activeElement==w&&(p!=2&&h(2),t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),$()))});const L=t=>{const a=document.createElement("div");a.innerHTML=t;const d=a.firstElementChild;x.appendChild(d)},j=()=>{const t=s.getElementById("chat-container");t.scrollTo({top:t.scrollHeight,behavior:"smooth"})};function X(){window.scrollY>window.visualViewport.height*.2&&h(3),window.scrollY==0&&h(m?2:1)}const q=t=>{if(t)L(B()),requestAnimationFrame(()=>{g=setTimeout(()=>{const a=s.querySelector("#skltn-text");T(a,o.skeletonTexts,{typingSpeed:10,deletingSpeed:10,pauseTime:1e3,loop:!0})},3500)});else{const a=s.querySelector("#skeleton-message");clearTimeout(g),a.remove()}};function Z(t){m=!0,t.preventDefault(),p!=2&&h(2)}function ee(t){m=!1,t.preventDefault(),p==2?h(1):p==1&&h(3)}function h(t){Y(w,E),t==1?(i.classList.remove("expanded"),i.classList.remove("minified"),p=1):t==2?(i.classList.remove("minified"),i.classList.add("expanded"),j(),p=2):t==3&&(i.classList.remove("expanded"),i.classList.add("minified"),p=3)}})()})();
